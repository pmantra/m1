# Stripe
[Stripe](https://stripe.com/docs/) is a payment processing service, which we use to charge members for services, pay practitioners, and reimburse maven wallet receipts. We use Stripe's customer feature for all member charges, for example appointment charges and message billing. We attach a stripe customer to a member during account creation. We use Stripe Connect custom accounts to pay practitioners and reimburse Maven Wallet users. Stripe Connect requires account verification information and bank account information. Code calling Stripe is in `api/models/stripe.py`. Stripe actions have their own table of audit records in the audit database which records json responses directly from the external service.

## Configuration
Maven has two entirely separate production stripe accounts. The `PAYMENTS_STRIPE_API_KEY` is associated with the account used to charge members and pay practitioners. The `REIMBURSEMENTS_STRIPE_API_KEY` is associated with the account used to transfer money to members as maven wallet reimbursements. Money in this account comes from companies who have bought the Maven Wallet product.

### Differences in Connect input for different Stripe accounts
Stripe has four types of connect accounts, out of which we use two. Practitioners can register as individuals or as company accounts, and must provide different identity verification (legal entity) information for the recipient information endpoint depending on their classification. All Maven Wallet users are individuals, but because we use transfers for their accounts and because Stripe has different identity verification rules depending on the amount of money transferred, Maven Wallet users may need to provide a full SSN or even scans of identification to be verified. Note that this doesn't mean practitioners won't have verification requirements, only that they wallet users are asked to provide that information up front. Any revisions of the connect account code needs to take individual practitioners, company practitioners, and individual wallet users all into account.
