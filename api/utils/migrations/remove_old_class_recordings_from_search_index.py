from app import create_app
from models import marketing
from storage.connection import db
from utils import index_resources


def remove_em():  # type: ignore[no-untyped-def] # Function is missing a return type annotation
    resources = marketing.Resource.query.filter(
        marketing.Resource.slug.in_(SLUGS)
    ).all()
    for resource in resources:
        print(f"Removing resource {resource.slug} from search index")
        index_resources.remove_from_index(resource)
        # Removing tags and tracks in case there are any, just to make sure
        # they don't get re-indexed
        resource.tags = []
        resource.allowed_tracks = []
        db.session.add(resource)
    db.session.commit()


SLUGS = [
    "infant-cpr-101-august-27th-2020",
    "september-8-2020-childbirth-education-101-virtual-class",
    "breastfeeding-101-september-16-2020",
    "domestic-infant-adoption-101-sept-23-2020-class",
    "infant-cpr-101-class-september-24-2020",
    "postpartum-recovery-101",
    "october-8-2020-childbirth-education-101-virtual-class",
    "breastfeeding-101-october-14-2020",
    "newborn-care-101-october-15-2020",
    "spotting-the-signs-of-postpartum-depression-and-anxiety-oct-26-2020-class-recording",
    "how-to-manage-stress-and-anxiety-oct-27-2020-class-recording",
    "infant-cpr-101-class-october-29-2020",
    "postpartum-recovery-101-november-5-2020",
    "november-10-2020-childbirth-education-101-virtual-class",
    "november-16-2020-prenatal-yoga-virtual-class",
    "breastfeeding-101-november-18-2020",
    "infant-cpr-101-class-november-19-2020",
    "newborn-care-101-december-3-2020",
    "december-9-2020-childbirth-education-101-virtual-class",
    "how-to-manage-stress-and-anxiety-dec-10-2020-class-recording",
    "december-14-2020-prenatal-yoga-virtual-class-copy",
    "breastfeeding-101-december-16-2020",
    "infant-cpr-101-class-december-22-2020",
    "newborn-care-101-january-5-2021",
    "postpartum-recovery-101-january-12-2021",
    "january-13-2021-childbirth-education-101-virtual-class",
    "breastfeeding-101-january-20-2021",
    "covid-the-vaccine-and-pregnancy-january-21-2021",
    "january-25-2021-prenatal-yoga-virtual-class",
    "infant-cpr-101-class-january-28-2021",
    "postpartum-recovery-101-february-1-2021",
    "newborn-care-101-february-9-2021",
    "february-10-2021-childbirth-education-101-virtual-class",
    "breastfeeding-101-february-17-2021",
    "february-22-2021-prenatal-yoga-virtual-class",
    "infant-cpr-101-class-february-25-2021",
    "postpartum-recovery-101-march-1-2021",
    "march-2-2021-newborn-and-infant-sleep-101",
    "march-4-2021-toddler-nutrition-101",
    "march-9-2021-newborn-care-101",
    "march-10-2021-breastfeeding-101",
    "march-15-2021-how-to-manage-stress-and-anxiety",
    "march-16-2021-what-you-need-to-know-about-covid-the-vaccine-and-pregnancy",
    "march-24-2021-childbirth-education-101",
    "march-25-2021-infant-cpr-101",
    "march-30-2021-prenatal-yoga-class",
    "march-31-2021-fertility-101",
    "april-6-2021-postpartum-recovery-101",
    "april-8-2021-newborn-care-101",
    "april-13-2021-newborn-and-infant-sleep-101",
    "april-14-2021-breastfeeding-101",
    "april-19-2021-childbirth-education-101",
    "april-20-2021-genetic-testing-in-pregnancy",
    "april-22-2021-toddler-nutrition-101",
    "april-26-2021-prenatal-yoga-class",
    "april-29-2021-infant-cpr-101",
    "may-3-2021-postpartum-recovery-101",
    "may-4-2021-what-you-need-to-know-about-covid-the-vaccine-and-pregnancy",
    "may-5-2021-childbirth-education-101",
    "may-12-2021-how-to-help-your-child-with-emotional-regulation",
    "may-13-2021-newborn-care-101",
    "may-17-2021-prenatal-yoga-class",
    "may-18-2021-newborn-and-infant-sleep-101",
    "may-19-2021-breastfeeding-101",
    "may-25-2021-how-to-manage-stress-and-anxiety",
    "may-26-2021-food-allergies-101-with-ready-set-food",
    "may-27-2021-infant-cpr-101",
    "june-2-2021-iui-and-ivf-101",
    "june-8-2021-newborn-and-infant-sleep-101",
    "june-10-2021-newborn-care-101",
    "june-14-2021-childbirth-education-101",
    "june-15-2021-postpartum-recovery-101",
    "june-16-2021-breastfeeding-101",
    "june-17-2021-child-cpr-101",
    "june-21-2021-prenatal-yoga",
    "june-22-2021-genetic-testing-in-pregnancy",
    "june-22-2021-sleep-training-for-4-and-5-month-olds",
    "june-24-2021-infant-cpr-101",
    "july-7-2021-iui-and-ivf-101",
    "july-8-2021-newborn-and-infant-sleep-101",
    "july-12-2021-childbirth-education-101",
    "july-13-2021-newborn-care-101",
    "july-14-2021-breastfeeding-101",
    "july-19-2021-postpartum-recovery-101",
    "july-20-2021-what-you-need-to-know-about-covid-the-vaccine-and-pregnancy",
    "july-22-2021-infant-cpr-101",
    "july-26-2021-how-to-manage-stress-and-anxiety",
    "july-28-2021-prenatal-yoga",
    "july-29-2021-toddler-nutrition-101",
    "august-5-2021-newborn-and-infant-sleep-101",
    "august-10-2021-ask-emily-oster-anything",
    "august-12-2021-prenatal-yoga",
    "august-16-2021-childbirth-education-101",
    "august-19-2021-infant-cpr-101",
    "august-23-2021-postpartum-recovery-101",
    "august-24-2021-domestic-infant-adoption-101",
    "august-25-2021-how-to-help-your-child-with-emotion-regulation",
    "august-26-2021-newborn-care-101",
    "august-30-2021-preparing-the-family-for-a-successful-transition-back-to-school-workplace",
    "august-31-2021-surrogacy-101",
    "september-7-2021-what-you-need-to-know-about-covid-the-vaccine-and-pregnancy",
    "september-8-2021-breastfeeding-101",
    "september-9-2021-how-to-manage-stress-and-anxiety",
    "september-13-2021-prenatal-yoga",
    "september-14-2021-fertility-genetic-testing-101",
    "september-16-2021-infant-cpr-101",
    "september-20-2021-postpartum-recovery-101",
    "september-21-2021-newborn-care-101",
    "september-23-2021-childbirth-education",
    "september-28-2021-childbirth-education-for-lgbtqia",
    "september-30-2021-newborn-and-infant-sleep",
    "september-30-2021-iui-and-ivf-101",
    "october-4-2021-toddler-nutrition-101",
    "october-6-2021-pregnancy-and-infant-loss",
    "october-12-2021-postpartum-recovery-101",
    "october-13-2021-breastfeeding-101",
    "october-14-2021-sleep-training-101-for-4-12-month-olds",
    "october-19-2021-newborn-care-101",
    "october-20-2021-childbirth-education-101",
    "october-21-2021-infant-cpr-101",
    "october-25-2021-prenatal-yoga",
    "october-25-2021-fertility-101",
    "october-26-2021-newborn-and-infant-sleep-101",
    "october-28-2021-protecting-your-relationship-while-trying-to-conceive",
    "november-1-2021-postpartum-recovery-101",
    "november-8-2021-what-you-need-to-know-about-covid-the-vaccine-and-pregnancy",
    "november-9-2021-preparing-for-parenthood",
    "november-10-2021-breastfeeding-101",
    "november-11-2021-newborn-care-101",
    "november-15-2021-childbirth-education-101",
    "november-16-2021-domestic-infant-adoption-101",
    "november-29-2021-infant-cpr-101",
    "november-29-2021-iui-and-ivf-101",
    "november-30-2021-newborn-and-infant-sleep-101",
    "december-7-2021-postpartum-recovery-101",
    "december-9-2021-newborn-care-101",
    "december-13-2021-infant-cpr-101",
    "december-15-2021-breastfeeding-101",
    "december-16-2021-newborn-and-infant-sleep",
    "december-20-2021-childbirth-education-101",
    "january-6-2021-newborn-care-101",
    "january-10-2022-toddler-nutrition-101",
    "january-11-2022-sleep-training-101-for-4-12-month-olds",
    "january-11-2022-male-fertility-101",
    "january-12-2022-breastfeeding-101",
    "january-13-2022-fertility-101",
    "january-18-2022-newborn-and-infant-sleep",
    "january-19-2022-childbirth-education-101",
    "january-20-2022-infant-cpr-101",
    "january-24-2022-postpartum-recovery-101",
    "january-25-2022-pregnancy-101",
    "january-26-2022-vaginal-birth-after-cesarean-101",
    "february-2-2022-domestic-infant-adoption-101",
    "february-3-2022-newborn-care-101",
    "february-7-2022-infant-cpr-101",
    "february-10-2022-postpartum-recovery-101",
    "february-14-2022-iui-and-ivf-101",
    "february-16-2022-breastfeeding-101",
    "february-17-2022-newborn-and-infant-sleep-101",
    "february-22-2022-preparing-for-parenthood",
    "february-23-2022-childbirth-education-101",
    "february-24-2022-child-cpr-101",
    "february-28-2022-advocating-for-yourself-during-pregnancy-labor-and-delivery",
    "march-7-2022-infant-cpr-101",
    "march-9-2022-how-to-help-your-child-with-emotion-regulation",
    "march-10-2022-fertility-medication-administration-101",
    "march-16-2022-breastfeeding-101",
    "march-24-2022-protecting-your-relationship-while-trying-to-conceive",
    "march-28-2022-egg-freezing-101",
    "march-30-2022-how-to-manage-stress-and-anxiety",
    "april-5-2022-sharing-the-load-of-parenting",
    "april-19-2022-fertility-101",
    "april-20-2022-breastfeeding-101",
    "april-25-2022-preparing-for-parenthood",
    "august-4-2022-preparing-the-family-for-a-transition-back-to-school",
]

if __name__ == "__main__":
    with create_app().app_context():
        remove_em()
